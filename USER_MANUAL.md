# ContextFlow 用户使用手册

## 目录
1. [产品简介](#产品简介)
2. [功能特点](#功能特点)
3. [快速开始](#快速开始)
4. [使用指南](#使用指南)
5. [演示组件](#演示组件)
6. [常见问题](#常见问题)
7. [故障排除](#故障排除)

## 产品简介

ContextFlow 是一个强大的上下文管理插件，专门设计用于优化多模型对话系统中的上下文传递和管理。它能够帮助您实现跨模型的上下文共享，提升对话系统的连贯性和智能性。

## 功能特点

### 1. 上下文管理
- 保存和检索对话上下文
- 支持多用户独立上下文
- 灵活的上下文存储格式

### 2. 跨模型兼容
- 支持多种AI模型（GPT、Claude等）
- 自动进行上下文格式转换
- 保持对话连贯性

### 3. 实时监控
- API调用统计
- 响应时间监控
- 错误追踪

## 快速开始

### 1. 访问插件
打开浏览器访问：`http://127.0.0.1:5001`

### 2. 功能导航
- 主页：`/`
- 插件介绍：`/plugin_intro`
- API文档：`/docs`
- 配置页面：`/config`

### 3. 演示功能
- 知识问答演示：`/demo/knowledge_demo`
- 天气查询演示：`/demo/weather`

## 使用指南

### 1. 上下文管理
```python
# 保存上下文
POST /api/context
{
    "user_id": "user123",
    "content": "对话内容",
    "model_type": "gpt"
}

# 获取上下文
GET /api/context/<user_id>?model_type=gpt
```

### 2. 上下文传递
```python
# 在模型间传递上下文
POST /api/transfer
{
    "user_id": "user123",
    "source_model": "gpt",
    "target_model": "claude",
    "context": "上下文内容"
}
```

## 演示组件

### 1. 知识问答演示
- 访问 `/demo/knowledge_demo`
- 支持通用知识问答
- 自动保存对话历史

### 2. 天气查询演示
- 访问 `/demo/weather`
- 支持天气相关查询
- 展示上下文理解能力

## 常见问题

### 1. 上下文不连贯
- 检查用户ID是否正确
- 确认模型类型设置
- 验证上下文格式

### 2. API调用失败
- 确认服务器状态
- 检查API密钥
- 验证请求格式

### 3. 响应延迟
- 检查网络连接
- 确认服务器负载
- 优化请求频率

## 故障排除

### 1. 服务无法访问
- 检查服务器运行状态
- 确认端口（5001）是否被占用
- 使用启动脚本重启服务

### 2. 演示组件异常
- 确保 Mock 服务器（3002端口）正常运行
- 检查日志文件 `server.log`
- 重新启动服务

### 3. 上下文丢失
- 检查存储服务状态
- 验证用户认证信息
- 查看错误日志

## 技术支持

如果您在使用过程中遇到问题：
1. 查看详细的错误日志
2. 检查配置文件是否正确
3. 参考API文档
4. 通过 Issue 系统报告问题

## 最佳实践

1. 定期清理不必要的上下文
2. 使用有意义的用户ID
3. 合理设置上下文长度
4. 定期检查服务状态
5. 保持日志文件整洁 